{{ define "main" }}
{{ if and (eq .Type "blog") (in .Permalink "/blog/") }}
  {{ if not .Params.menu }}
    <h1>{{ .Title }}</h1>
    <p>
      <i>
        <time datetime="{{ .Date.Format "2006-01-02" }}" pubdate>
          {{ .Date.Format (default "02 Jan, 2006" .Site.Params.dateFormat) }}
        </time>
      </i>
    </p>
  {{ end }}
  <content>{{ .Content }}</content>

  <script>
    const prefersDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches;

    if (prefersDarkMode) {
      const script = document.createElement("script");
      script.src = "https://giscus.app/client.js";
      script.async = true;
      script.setAttribute("data-repo", "omnetrix/tamzidr");
      script.setAttribute("data-repo-id", "R_kgDOJfV-ag");
      script.setAttribute("data-category", "General");
      script.setAttribute("data-category-id", "DIC_kwDOJfV-as4CXdIJ");
      script.setAttribute("data-mapping", "url");
      script.setAttribute("data-strict", "0");
      script.setAttribute("data-reactions-enabled", "1");
      script.setAttribute("data-emit-metadata", "0");
      script.setAttribute("data-input-position", "top");
      script.setAttribute("data-theme", "dark_dimmed");
      script.setAttribute("data-lang", "en");
      script.setAttribute("crossorigin", "anonymous");
      document.body.appendChild(script);
    } else {
      const script = document.createElement("script");
      script.src = "https://giscus.app/client.js";
      script.async = true;
      script.setAttribute("data-repo", "omnetrix/tamzidr");
      script.setAttribute("data-repo-id", "R_kgDOJfV-ag");
      script.setAttribute("data-category", "General");
      script.setAttribute("data-category-id", "DIC_kwDOJfV-as4CXdIJ");
      script.setAttribute("data-mapping", "url");
      script.setAttribute("data-strict", "0");
      script.setAttribute("data-reactions-enabled", "1");
      script.setAttribute("data-emit-metadata", "0");
      script.setAttribute("data-input-position", "top");
      script.setAttribute("data-theme", "light");
      script.setAttribute("data-lang", "en");
      script.setAttribute("crossorigin", "anonymous");
      document.body.appendChild(script);
    }
  </script>

  <div class="giscus"></div>

  <p>
    {{ range (.GetTerms "tags") }}
      <a href="{{ .Permalink }}">#{{ .LinkTitle }}</a>
    {{ end }}
  </p>
{{ else }}
  <h1>{{ .Title }}</h1>
  <content>{{ .Content }}</content>
{{ end }}
{{ end }}
